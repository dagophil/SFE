#ifndef SFE_SCREEN_HXX
#define SFE_SCREEN_HXX

#include <vector>

#include "game_object.hxx"
#include "widget.hxx"

namespace sfe
{

    ////////////////////////////////////////////////////////////
    /// A screen holds the gui widgets and the game objects.
    ////////////////////////////////////////////////////////////
    class Screen
    {
    public:

        ////////////////////////////////////////////////////////////
        /// Construct a screen with the given game view.
        ////////////////////////////////////////////////////////////
        Screen(sf::View game_view);

        ////////////////////////////////////////////////////////////
        /// Update the gui and the game objects.
        ////////////////////////////////////////////////////////////
        void update(sf::RenderWindow const & window, sf::Time elapsed_time);

        ////////////////////////////////////////////////////////////
        /// Render the gui and the game objects.
        ////////////////////////////////////////////////////////////
        void render(sf::RenderTarget & target) const;

        ////////////////////////////////////////////////////////////
        /// Process the user input.
        ////////////////////////////////////////////////////////////
        void process_input(int mouse_x, int mouse_y);

        ////////////////////////////////////////////////////////////
        /// Return the gui widget.
        ////////////////////////////////////////////////////////////
        Widget & get_gui();

        ////////////////////////////////////////////////////////////
        /// Return the gui widget.
        ////////////////////////////////////////////////////////////
        Widget const & get_gui() const;

        ////////////////////////////////////////////////////////////
        /// Return the game objects.
        ////////////////////////////////////////////////////////////
        std::vector<std::unique_ptr<GameObject> > & get_game_objects();

        ////////////////////////////////////////////////////////////
        /// Return the game objects.
        ////////////////////////////////////////////////////////////
        std::vector<std::unique_ptr<GameObject> > const & get_game_objects() const;

        ////////////////////////////////////////////////////////////
        /// Return the game view.
        ////////////////////////////////////////////////////////////
        sf::View & get_game_view();

        ////////////////////////////////////////////////////////////
        /// Return the game view.
        ////////////////////////////////////////////////////////////
        sf::View const & get_game_view() const;

        ////////////////////////////////////////////////////////////
        /// Set the game view.
        ////////////////////////////////////////////////////////////
        void set_game_view(sf::View const & view);

    private:

        ////////////////////////////////////////////////////////////
        /// The game objects.
        ////////////////////////////////////////////////////////////
        std::vector<std::unique_ptr<GameObject> > game_objects_;

        ////////////////////////////////////////////////////////////
        /// The gui widget.
        ////////////////////////////////////////////////////////////
        Widget gui_;

        ////////////////////////////////////////////////////////////
        /// The game view.
        ////////////////////////////////////////////////////////////
        sf::View game_view_;

    }; // class Screen

} // namespace sfe

#endif
